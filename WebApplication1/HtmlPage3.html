<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
    
    <style>
        .box{
            text-align:center;
            line-height:80px;
            font-family:'Comic Sans MS';
            font-size:3.5em;
            width: 80px;
            height: 80px;
            border: 1px solid black;
            float:left;
        }

    </style>

    <script type="text/javascript" src="jquery-3.1.1.min.js"></script>


    <script>

        var puzzle = [];
        var puzzlePic = [];

        function picArray(){
            for (var i = 2; i < 9; i++) {
                puzzlePic[i] = '<img class="image" id="img' + i + '" src="pics2/image_part_00' + i + '.jpg" draggable="true" ondragstart="drag(event)" />';
            }
        }

        function init() {
            for (var i = 0; i < 8; i++) {
                puzzle[i] = i + 1;
            }
            puzzle[8] = 0;
            var zeroPosition = 8;
            var r;
            for (var i = 0; i < 21; i++) {
                switch (zeroPosition) {
                    case 0:
                        r = Math.floor(Math.random() * 2);
                        if (r==0) {
                            puzzle[zeroPosition] = puzzle[1];
                            puzzle[1] = 0;
                            zeroPosition = 1;
                        } else {
                            puzzle[zeroPosition] = puzzle[3];
                            puzzle[3] = 0;
                            zeroPosition = 3;
                        }
                        break;
                    case 1:
                        r = Math.floor(Math.random() * 3);
                        if (r == 0) {
                            puzzle[zeroPosition] = puzzle[0];
                            puzzle[0] = 0;
                            zeroPosition = 0;
                        }
                        else if (r == 1) {
                            puzzle[zeroPosition] = puzzle[4];
                            puzzle[4] = 0;
                            zeroPosition = 4;

                        }
                        else {
                            puzzle[zeroPosition] = puzzle[2];
                            puzzle[2] = 0;
                            zeroPosition = 2;
                        }
                        break;
                    case 2:
                        r = Math.floor(Math.random() * 2);
                        if (r == 0) {
                            puzzle[zeroPosition] = puzzle[1];
                            puzzle[1] = 0;
                            zeroPosition = 1;
                        } else {
                            puzzle[zeroPosition] = puzzle[5];
                            puzzle[5] = 0;
                            zeroPosition = 5;
                        }
                        break;
                    case 3:
                        r = Math.floor(Math.random() * 3);
                        if (r == 0) {
                            puzzle[zeroPosition] = puzzle[0];
                            puzzle[0] = 0;
                            zeroPosition = 0;
                        }
                        else if (r == 1) {
                            puzzle[zeroPosition] = puzzle[4];
                            puzzle[4] = 0;
                            zeroPosition = 4;

                        }
                        else {
                            puzzle[zeroPosition] = puzzle[6];
                            puzzle[6] = 0;
                            zeroPosition = 6;
                        }
                        break;
                    case 4: r = Math.floor(Math.random() * 4);
                        if (r == 0) {
                            puzzle[zeroPosition] = puzzle[1];
                            puzzle[1] = 0;
                            zeroPosition = 1;
                        }
                        else if (r == 1) {
                            puzzle[zeroPosition] = puzzle[3];
                            puzzle[3] = 0;
                            zeroPosition = 3;

                        }
                        else if (r == 2) {
                            puzzle[zeroPosition] = puzzle[5];
                            puzzle[5] = 0;
                            zeroPosition = 5;

                        }
                        else {
                            puzzle[zeroPosition] = puzzle[7];
                            puzzle[7] = 0;
                            zeroPosition = 7;
                        }
                        break;
                    case 5:
                        r = Math.floor(Math.random() * 3);
                        if (r == 0) {
                            puzzle[zeroPosition] = puzzle[2];
                            puzzle[2] = 0;
                            zeroPosition = 2;
                        }
                        else if (r == 1) {
                            puzzle[zeroPosition] = puzzle[4];
                            puzzle[4] = 0;
                            zeroPosition = 4;

                        }
                        else {
                            puzzle[zeroPosition] = puzzle[8];
                            puzzle[8] = 0;
                            zeroPosition = 8;
                        }
                        break;
                    case 6:
                        r = Math.floor(Math.random() * 2);
                        if (r == 0) {
                            puzzle[zeroPosition] = puzzle[3];
                            puzzle[3] = 0;
                            zeroPosition = 3;
                        } else {
                            puzzle[zeroPosition] = puzzle[7];
                            puzzle[7] = 0;
                            zeroPosition = 7;
                        }
                        break;
                    case 7:
                        r = Math.floor(Math.random() * 3);
                        if (r == 0) {
                            puzzle[zeroPosition] = puzzle[6];
                            puzzle[6] = 0;
                            zeroPosition = 6;
                        }
                        else if (r == 1) {
                            puzzle[zeroPosition] = puzzle[4];
                            puzzle[4] = 0;
                            zeroPosition = 4;

                        }
                        else {
                            puzzle[zeroPosition] = puzzle[8];
                            puzzle[8] = 0;
                            zeroPosition = 8;
                        }
                        break;
                    case 8:
                        r = Math.floor(Math.random() * 2);
                        if (r == 0) {
                            puzzle[zeroPosition] = puzzle[7];
                            puzzle[7] = 0;
                            zeroPosition = 7;
                        } else {
                            puzzle[zeroPosition] = puzzle[5];
                            puzzle[5] = 0;
                            zeroPosition = 5;
                        }
                        break;
                }
            }
            drawPuzzle();
        }

        function rand(l,h) {
            return l + Math.floor((h - l + 1) * Math.random());

        }

        function drawPuzzle() {
            $('#divPuzzle').html('');
            for (var i = 0; i < 9; i++) {
                $('#divPuzzle').append('<div onclick="boxClicked('+i+')" class="box"' + (i == 3 || i == 6 ? 'style="clear:both;"' : '') + '> '+ (puzzle[i] !=0 ? puzzle[i]:'') +'</div>');
            }
        }

        function boxClicked(i) {
            switch (i) {
                case 0:
                    if (puzzle[1]==0) {
                        puzzle[1] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;                        
                    }
                    else if (puzzle[3]==0) {
                        puzzle[3] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else {
                        alert('Not possible');
                    }
                    break;
                case 1:
                    if (puzzle[0] == 0) {
                        puzzle[0] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[4] == 0) {
                        puzzle[4] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;

                    }

                    else if(puzzle[2]==0){
                        puzzle[2] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else {
                        alert('Not possible');
                    }
                    break;
                case 2:
                    if (puzzle[1] == 0) {
                        puzzle[1] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    } 
                    else if(puzzle[5]==0) {
                        puzzle[5] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                        else {
                        alert('Not possible');
                        }
                    break;
                case 3:
                    if (puzzle[0] == 0) {
                        puzzle[0] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[4] == 0) {
                        puzzle[4] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;

                    }
                    else if(puzzle[6]==0){
                        puzzle[6] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else {
                        alert('Not possible');
                    }
                    break;
                case 4: 
                    if (puzzle[1] == 0) {
                        puzzle[1] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[3] == 0) {
                        puzzle[3] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[5] == 0) {
                        puzzle[5] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[7] == 0) {
                        puzzle[7] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else {
                        alert('Not possible');
                    }
                    break;
                case 5:
                    if (puzzle[2] == 0) {
                        puzzle[2] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[4] == 0) {
                        puzzle[4] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[8] == 0) {
                        puzzle[8] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else {
                        alert('Not possible');
                    }
                    break;
                case 6:
                    if (puzzle[3] == 0) {
                        puzzle[3] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[7] == 0) {
                        puzzle[7] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else {
                        alert('Not possible');
                    }
                    break;
                case 7:
                    if (puzzle[4] == 0) {
                        puzzle[4] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[6] == 0) {
                        puzzle[6] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[8] == 0) {
                        puzzle[8] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else {
                        alert('Not possible');
                    }
                    break;
                case 8:
                    if (puzzle[7] == 0) {
                        puzzle[7] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else if (puzzle[5] == 0) {
                        puzzle[5] = puzzle[i];
                        puzzle[i] = 0;
                        zeroPosition = i;
                    }
                    else {
                        alert('Not possible');
                    }
                    break;
            }
            $('#header').text('Not Sorted');
            if (puzzle[8] == 0) {
                checkFinish();
            }
            
            drawPuzzle();

        }
        
        function checkFinish() {
            for (var f = 1; f < 9; f++) {
                if (puzzle[f-1] != f ) {
                    return;
                    }
                }
            $('#header').text('FINISH!!!');
        }

    </script>
    

</head>
<body onload="init()" style="background-color:wheat;">
    <h1 id="header" style="text-align:center;">Sliding Puzzle</h1>
    <div id="divPuzzle" style="width:246px; margin: 0 auto;"></div>

</body>
</html>
